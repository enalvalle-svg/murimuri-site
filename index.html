<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Muri Muri — Café</title>
  <meta name="description" content="Muri Muri — café de especialidad en Coyoacán, CDMX." />

  <!-- Favicon = same as logo -->
  <link rel="icon" href="assets/logo.png" type="image/png" />
  <link rel="apple-touch-icon" href="assets/logo.png" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Space+Grotesk:wght@700;800&display=swap" rel="stylesheet" />

  <style>
    :root { --accent:#eaad96; --ink:#0f0f0f; --muted:#6a6a6a; --max:1180px; }

    /* Local brand fonts */
    @font-face{
      font-family:'Marfa';
      src:url('assets/fonts/ABCMARFA-SEMIBOLD-TRIAL.otf') format('opentype');
      font-weight:700; font-style:normal; font-display:swap;
    }
    @font-face{
      font-family:'MuriSans';
      src:url('assets/fonts/Regular.ttf') format('truetype');
      font-weight:400; font-style:normal; font-display:swap;
    }

    *{ box-sizing:border-box }
    body{
      margin:0; background:#fff; color:var(--ink);
      font-family:'MuriSans', Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      line-height:1.6;
    }
    a{ color:inherit; text-decoration:none }

    .wrap{ max-width:var(--max); margin:0 auto; padding:0 20px; }

    header{
      position:sticky; top:0; z-index:50;
      background:rgba(255,255,255,.9);
      backdrop-filter:saturate(1.2) blur(8px);
      border-bottom:1px solid rgba(0,0,0,.06);
    }
    .nav{
      display:grid; grid-template-columns:1fr auto 1fr;
      align-items:center; height:68px;
    }
    .nav a{ font-weight:600 }
    .brand .wordmark{
      font-family:'Marfa','Space Grotesk', Inter, sans-serif;
      font-weight:700; letter-spacing:.06em;
    }

    /* Playfield fills viewport between header and dock */
    .playfield{
      position:relative; width:100%;
      height:calc(100dvh - 68px - 68px);
      background:#fff;
      overflow:hidden;
    }

    /* Logo (bounces inside playfield) */
    #logo{
      position:absolute; width:640px; /* 400% look */
      filter:drop-shadow(0 6px 16px rgba(0,0,0,.25));
      cursor:pointer; z-index:2;
      will-change:transform;
    }
    #logo.logo-fallback{
      padding:24px 30px; background:#eaad96; color:#000;
      font-family:'Marfa','Space Grotesk',Inter,sans-serif; font-weight:700; text-transform:uppercase;
    }

    /* Random slideshow photos: one at a time, fade only */
    .photo{
      position:absolute;
      object-fit:cover; /* fills the bucket */
      border:1px solid rgba(0,0,0,.08);
      box-shadow:0 8px 24px rgba(0,0,0,.12);
      opacity:0; transition:opacity .6s ease;
      z-index:1; pointer-events:none; background:#fff;
    }
    .photo.show{ opacity:1 }

    /* Bottom dock with 4 even links */
    .dock{
      position:sticky; bottom:0; height:68px;
      background:rgba(255,255,255,.9);
      border-top:1px solid rgba(0,0,0,.06);
      backdrop-filter:saturate(1.2) blur(8px);
    }
    .dock .row{
      height:68px; display:grid; grid-template-columns:repeat(4,1fr);
      align-items:center; justify-items:center;
    }
    .dock a{ font-weight:600 }
    .icon{ width:18px; height:18px; vertical-align:-3px; margin-right:6px; }

    footer{ padding:36px 0 48px; border-top:1px solid rgba(0,0,0,.06) }
    .footer-grid{ display:grid; gap:18px; grid-template-columns:2fr 1fr 1fr }
    .tiny{ font-size:.92rem; color:var(--muted) }
  </style>
</head>
<body>
  <header>
    <div class="wrap nav">
      <div><a class="brand" href="#top"><span class="wordmark">MURI MURI</span></a></div>
      <nav><a href="#" id="contactBtn"> Lu cerrado, Ma: 10-14, Mi-Do: 10-20 </a></nav>
      <div style="text-align:right">
        <a href="https://instagram.com/murimuricafe" target="_blank" rel="noopener">INSTAGRAM</a>
      </div>
    </div>
  </header>

  <!-- Main interactive area -->
  <section id="playfield" class="playfield" aria-label="Área interactiva">
    <img id="logo" src="assets/logo.png" alt="Muri Muri logo" />
    <!-- The slideshow <img.photo> nodes are created by JS -->
  </section>

  <!-- Dock -->
  <div class="dock">
    <div class="row">
      <a href="https://maps.google.com/?q=Muri%20Muri%20Caf%C3%A9%20Coyoac%C3%A1n" target="_blank" rel="noopener">04100 Coyoacán, CDMX</a>
      <a href="assets/menu_1.pdf" target="_blank" rel="noopener">Menú (PDF)</a>
      <a href="https://wa.me/525669657508" target="_blank" rel="noopener">
        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M18.1 15.9c-.3.8-1.6 1.6-2.3 1.7-.6.1-1.4.1-2.3-.1a9.8 9.8 0 0 1-4.7-2.6A10.7 10.7 0 0 1 5.9 9c-.2-1 .2-1.7.5-2.1.3-.4.7-.5 1.1-.5h.8c.2 0 .5.2.6.6l.7 1.7c.1.3 0 .6-.1.8l-.4.6-.2.3c-.1.1 0 .4.1.6.3.6.9 1.4 1.6 2.1.7.7 1.5 1.3 2.1 1.6.2.1.5.2.6.1l.3-.2.6-.4c.2-.1.5-.2.8-.1l1.7.7c.4.1.6.4.6.6 0 .4-.1.8-.2 1z" fill="#0f0f0f"/>
          <circle cx="12" cy="12" r="10" fill="none" stroke="#0f0f0f" stroke-width="1.5"/>
        </svg>
        WhatsApp: 5669657508
      </a>
      <a href="mailto:hola@murimuri.coffee" rel="noopener">
        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M3 6.5A2.5 2.5 0 0 1 5.5 4h13A2.5 2.5 0 0 1 21 6.5v11A2.5 2.5 0 0 1 18.5 20h-13A2.5 2.5 0 0 1 3 17.5v-11z" fill="none" stroke="#0f0f0f" stroke-width="1.5"/>
          <path d="M4 7l8 6 8-6" fill="none" stroke="#0f0f0f" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"/>
        </svg>
        Mail: hola@murimuri.coffee
      </a>
    </div>
  </div>

  <footer>
    <div class="wrap footer-grid">
      <div>
        <div class="brand"><span class="wordmark">MURI MURI</span></div>
        <p class="tiny">© <span id="y"></span> Muri Muri. Todos los derechos reservados.</p>
      </div>
      <div><strong>Síguenos</strong><p><a href="https://instagram.com/murimuricafe" target="_blank" rel="noopener">@murimuricafe</a></p></div>
      <div><strong>Contacto</strong><p>
        <a href="mailto:hola@murimuri.coffee">hola@murimuri.coffee</a><br/>
        <a href="https://wa.me/525669657508" target="_blank" rel="noopener">5669657508</a><br/>
        Coyoacán, CDMX</p>
      </div>
    </div>
  </footer>

  <script>
    // --- Utilities ---
    const $ = (sel, root = document) => root.querySelector(sel);

    // Year stamp
    const y = $('#y'); if (y) y.textContent = new Date().getFullYear();

    // --- Bouncing logo inside the playfield ---
    (function initLogoBounce(){
      const field = $('#playfield');
      const logo  = $('#logo');
      if(!field || !logo) return;

      let x = 20, y = 20;         // position
      let vx = 1.0, vy = 0.8;     // velocity
      let lw = 640, lh = 200;     // logo size cache

      function measure(){
        const r = logo.getBoundingClientRect();
        if (r.width && r.height){ lw = r.width; lh = r.height; }
      }
      logo.addEventListener('load', measure);
      setTimeout(measure, 200);

      function frame(){
        const fw = field.clientWidth, fh = field.clientHeight;
        x += vx; y += vy;
        if (x <= 0 || x + lw >= fw) vx *= -1;
        if (y <= 0 || y + lh >= fh) vy *= -1;
        logo.style.transform = `translate(${x}px, ${y}px)`;
        requestAnimationFrame(frame);
      }
      requestAnimationFrame(frame);
    })();

    // --- Random, one-at-a-time slideshow (.photo), 15s, no repeats in cycle ---
    (function initRandomSlideshow(){
      const field = $('#playfield');
      if(!field) return;

      // Configure your images here
      const PHOTO_URLS = [
        'assets/foto1.jpg','assets/foto2.jpg','assets/foto3.jpg','assets/foto4.jpg',
        'assets/foto5.jpg','assets/foto6.jpg','assets/foto7.jpg'
      ];
      const DURATION = 15000; // 15 seconds per photo

      // Pre-create <img.photo> nodes (hidden initially)
      const nodes = PHOTO_URLS.map((src, i) => {
        const img = document.createElement('img');
        img.className = 'photo';
        img.src = src;
        img.alt = 'Foto ' + (i + 1);
        field.appendChild(img);
        return img;
      });

      // Helpers
      const rint = (min, max) => Math.floor(Math.random()*(max-min+1)) + min;

      // Sizes: three "buckets" + slight variance
      function randomSize(){
        const bucket = rint(0, 2);
        let w = bucket === 0 ? 260 : (bucket === 1 ? 320 : 380);
        w += rint(-16, 24);
        const aspect = 0.67; // ~4:3
        const h = Math.round(w / aspect);
        return { w, h };
      }

      function placeRandom(img, w, h){
        const maxX = Math.max(0, field.clientWidth  - w);
        const maxY = Math.max(0, field.clientHeight - h);
        const x = rint(0, maxX);
        const y = rint(0, maxY);
        img.style.left = x + 'px';
        img.style.top  = y + 'px';
        img.style.width  = w + 'px';
        img.style.height = h + 'px';
      }

      // Fisher–Yates shuffle
      function shuffle(arr){
        const a = arr.slice();
        for (let i=a.length-1; i>0; i--){
          const j = Math.floor(Math.random()*(i+1));
          [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
      }

      // Sequence control: show each photo once per cycle in random order
      let order = shuffle([...nodes.keys()]);
      let cursor = 0;
      let lastIdx = -1;

      function nextOrder(){
        const oldLast = lastIdx;
        order = shuffle([...nodes.keys()]);
        // avoid immediate repeat at cycle boundary
        if (order.length > 1 && order[0] === oldLast) {
          [order[0], order[1]] = [order[1], order[0]];
        }
        cursor = 0;
      }

      function hideAll(){
        nodes.forEach(n => n.classList.remove('show'));
      }

      function showNext(){
        // Reset order if we finished a cycle
        if (cursor >= order.length) nextOrder();

        // Pick image for this step
        const idx = order[cursor++];
        lastIdx = idx;
        const img = nodes[idx];

        // Position & size
        const { w, h } = randomSize();
        placeRandom(img, w, h);

        // Fade in the chosen one, hide others
        hideAll();
        requestAnimationFrame(() => img.classList.add('show'));

        // Schedule next
        setTimeout(showNext, DURATION);
      }

      // Kick off once the field has layout
      const ensureStart = () => {
        if (field.clientWidth && field.clientHeight) {
          showNext();
        } else {
          requestAnimationFrame(ensureStart);
        }
      };
      ensureStart();

      // Optional: re-place current photo on resize to keep it inside
      window.addEventListener('resize', () => {
        const current = nodes[lastIdx];
        if (!current) return;
        const w = current.offsetWidth || 320;
        const h = current.offsetHeight || 480;
        placeRandom(current, w, h);
      });
    })();
  </script>
</body>
</html>
