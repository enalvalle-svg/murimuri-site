<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Muri Muri — Locked + Bouncing Logo + Random Spawns</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Space+Grotesk:wght@700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --pearl:#fde9e2; --accent:#eaad96; --ink:#0f0f0f; --paper:#ffffff; --muted:#6a6a6a;
      --header-h: 68px; --dock-h: 68px; --max: 1180px;
    }
    *{box-sizing:border-box}
    html, body { height: 100%; }
    /* Screen LOCKED initially: prevent page scroll until logo click */
    body.locked { overflow: hidden; }
    body.unlocked { overflow: auto; }
    body{margin:0;background:var(--paper);color:var(--ink);font-family:Inter,sans-serif;line-height:1.6}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:var(--max);margin:0 auto;padding:0 20px}
    header{position:sticky;top:0;z-index:50;background:rgba(255,255,255,.9);backdrop-filter:saturate(1.2) blur(8px);border-bottom:1px solid rgba(0,0,0,.06)}
    .nav{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;height:var(--header-h)}
    .brand .wordmark{font-family:'Space Grotesk',Inter,sans-serif;font-weight:800;letter-spacing:.06em}

    /* Main playfield fills between header and dock */
    .playfield{position:relative;width:100%;height:calc(100dvh - var(--header-h) - var(--dock-h));
      background:linear-gradient(180deg,#fff,var(--pearl));overflow:hidden}
    #logo{position:absolute;width:160px;filter:drop-shadow(0 6px 16px rgba(0,0,0,.25));cursor:pointer;z-index:2}
    #logo.logo-fallback{padding:16px 22px;border-radius:16px;background:var(--accent);color:#000;
      font-family:'Space Grotesk',Inter,sans-serif;font-weight:800;text-transform:uppercase}

    /* Random spawned photos */
    .photo{
      position:absolute;width:140px;height:94px;border-radius:12px;object-fit:cover;
      border:1px solid rgba(0,0,0,.08);box-shadow:0 8px 24px rgba(0,0,0,.12);
      opacity:0; transform:translateY(6px) scale(.98);
      transition: opacity .4s ease, transform .4s ease, left .6s ease, top .6s ease;
      z-index:1;
    }
    .photo.show{ opacity:1; transform:translateY(0) scale(1); }

    /* Bottom dock (plain links, like header) */
    .dock{position:sticky;bottom:0;height:var(--dock-h);background:rgba(255,255,255,.9);
      border-top:1px solid rgba(0,0,0,.06);backdrop-filter:saturate(1.2) blur(8px)}
    .dock .row{height:var(--dock-h);display:grid;grid-template-columns:1fr auto 1fr;align-items:center}
    .dock a{font-weight:600}
    .right{text-align:right}.center{text-align:center}
    .icon{width:18px;height:18px;vertical-align:-3px;margin-right:6px}

    footer{padding:30px 0;border-top:1px solid rgba(0,0,0,.06);text-align:center}
    footer .brand{font-family:'Space Grotesk',Inter,sans-serif;font-weight:800;letter-spacing:.06em}
    footer p{font-size:.92rem;color:var(--muted)}

    /* Optional hint overlay while locked */
    .hint{
      position:absolute; inset:auto 0 12px 0; text-align:center; pointer-events:none;
      color:#444; font-size:.92rem;
    }
  </style>
</head>
<body class="locked">
  <header>
    <div class="wrap nav">
      <div><a class="brand" href="#top"><span class="wordmark">MURI MURI</span></a></div>
      <nav><a href="mailto:hola@murimuri.coffee">CONTACTO</a></nav>
      <div style="text-align:right"><a href="https://instagram.com/murimuricafe" target="_blank">INSTAGRAM</a></div>
    </div>
  </header>

  <main id="top">
    <section class="playfield" id="playfield">
      <img id="logo" src="logo.png" alt="Muri Muri logo" />
      <div class="hint">Toca el logo para entrar</div>
    </section>
  </main>

  <div class="dock">
    <div class="wrap row">
      <div><a href="https://maps.google.com/?q=Muri%20Muri%20Caf%C3%A9%20Coyoac%C3%A1n" target="_blank">Dirección: Coyoacán, CDMX</a></div>
      <div class="center"><a href="menu.pdf" target="_blank">Menú (PDF)</a></div>
      <div class="right">
        <a href="https://wa.me/525669657508" target="_blank">
          <svg class="icon" viewBox="0 0 24 24"><path d="M18.1 15.9c-.3.8-1.6 1.6-2.3 1.7-.6.1-1.4.1-2.3-.1a9.8 9.8 0 0 1-4.7-2.6A10.7 10.7 0 0 1 5.9 9c-.2-1 .2-1.7.5-2.1.3-.4.7-.5 1.1-.5h.8c.2 0 .5.2.6.6l.7 1.7c.1.3 0 .6-.1.8l-.4.6-.2.3c-.1.1 0 .4.1.6.3.6.9 1.4 1.6 2.1.7.7 1.5 1.3 2.1 1.6.2.1.5.2.6.1l.3-.2.6-.4c.2-.1.5-.2.8-.1l1.7.7c.4.1.6.4.6.6 0 .4-.1.8-.2 1z" fill="#0f0f0f"/><circle cx="12" cy="12" r="10" fill="none" stroke="#0f0f0f" stroke-width="1.5"/></svg>
          WhatsApp
        </a>
        &nbsp;·&nbsp;
        <a href="mailto:hola@murimuri.coffee">
          <svg class="icon" viewBox="0 0 24 24"><path d="M3 6.5A2.5 2.5 0 0 1 5.5 4h13A2.5 2.5 0 0 1 21 6.5v11A2.5 2.5 0 0 1 18.5 20h-13A2.5 2.5 0 0 1 3 17.5v-11z" fill="none" stroke="#0f0f0f" stroke-width="1.5"/><path d="M4 7l8 6 8-6" fill="none" stroke="#0f0f0f" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Email
        </a>
      </div>
    </div>
  </div>

  <section id="gameSection" style="padding:40px 0;text-align:center">
    <canvas id="runner" width="720" height="180"></canvas>
    <div style="color:#6a6a6a;margin-top:10px">Espacio o toque para saltar. Enter para reiniciar.</div>
  </section>

  <footer>
    <div class="brand">MURI MURI</div>
    <p>© 2025 Muri Muri. Todos los derechos reservados.</p>
  </footer>

  <script>
    // Helper: get random int in [min, max]
    const rint = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;

    // Bouncing logo inside the playfield (slower)
    (function(){
      const field=document.getElementById('playfield'),logo=document.getElementById('logo');
      let x=20,y=20,vx=1.2,vy=0.9,lw=160,lh=80;
      function measure(){const r=logo.getBoundingClientRect();if(r.width){lw=r.width;lh=r.height;}}
      logo.addEventListener('load',measure);setTimeout(measure,200);
      function step(){
        const fw=field.clientWidth,fh=field.clientHeight;x+=vx;y+=vy;
        if(x<=0||x+lw>=fw)vx*=-1;if(y<=0||y+lh>=fh)vy*=-1;
        logo.style.transform=`translate(${x}px,${y}px)`;requestAnimationFrame(step);
      }
      requestAnimationFrame(step);

      // Unlock screen & scroll to game when clicking logo
      logo.addEventListener('click',()=>{
        document.body.classList.remove('locked');
        document.body.classList.add('unlocked');
        document.getElementById('gameSection').scrollIntoView({behavior:'smooth'});
      });
    })();

    // Random 7 images that reposition every 15s, always visible
    (function(){
      const field = document.getElementById('playfield');
      const PHOTO_URLS = [
        "https://picsum.photos/id/1003/800/533",
        "https://picsum.photos/id/1015/800/533",
        "https://picsum.photos/id/1024/800/533",
        "https://picsum.photos/id/1025/800/533",
        "https://picsum.photos/id/1035/800/533",
        "https://picsum.photos/id/1041/800/533",
        "https://picsum.photos/id/1050/800/533",
        "https://picsum.photos/id/1062/800/533",
        "https://picsum.photos/id/1074/800/533"
      ];
      const COUNT = 7;
      const photos = [];

      function createPhoto(i){
        const img = document.createElement('img');
        img.className = 'photo';
        img.src = PHOTO_URLS[i % PHOTO_URLS.length];
        img.alt = 'Foto ' + (i+1);
        field.appendChild(img);
        photos.push(img);
        // first placement with a small random delay for a nice stagger
        setTimeout(()=>{ placeRandom(img, true); }, rint(100, 900));
      }

      function placeRandom(img, reveal=false){
        const imgW = 140, imgH = 94;
        const maxX = Math.max(0, field.clientWidth - imgW);
        const maxY = Math.max(0, field.clientHeight - imgH);
        const x = rint(0, maxX);
        const y = rint(0, maxY);
        img.style.left = x + 'px';
        img.style.top  = y + 'px';
        if(reveal) img.classList.add('show');
      }

      // Make 7 photo nodes
      for(let i=0;i<COUNT;i++) createPhoto(i);

      // Every 15s loop: reposition each photo and optionally rotate its source
      setInterval(()=>{
        photos.forEach((img, idx)=>{
          // 50% chance to swap to a new image source for subtle freshness
          if(Math.random() < 0.5){
            const next = rint(0, PHOTO_URLS.length-1);
            img.src = PHOTO_URLS[next];
          }
          placeRandom(img, true);
        });
      }, 15000);
    })();

    // Minimal runner (same as before)
    function initRunner(){
      const cvs=document.getElementById('runner'),ctx=cvs.getContext('2d');
      let running=true,G=0.6,JUMP=-10,ground=cvs.height-24;
      const player={x:40,y:ground,vy:0,w:22,h:22};let obstacles=[],spawnGap=0;
      function reset(){player.y=ground;player.vy=0;obstacles=[];running=true;}
      function spawn(){const w=18+Math.random()*12;obstacles.push({x:cvs.width+20,y:ground,w,h:18});}
      function draw(){ctx.clearRect(0,0,cvs.width,cvs.height);
        ctx.fillStyle='#e9e9e9';ctx.fillRect(0,ground+2,cvs.width,4);
        ctx.fillStyle='#935c4d';ctx.fillRect(player.x,player.y-player.h,player.w,player.h);
        ctx.fillStyle='#222';obstacles.forEach(o=>ctx.fillRect(o.x,o.y-o.h,o.w,o.h));}
      function update(){if(!running)return;player.vy+=G;player.y+=player.vy;if(player.y>ground){player.y=ground;player.vy=0;}
        const speed=4.4;obstacles.forEach(o=>o.x-=speed);obstacles=obstacles.filter(o=>o.x+o.w>0);
        spawnGap-=speed;if(spawnGap<=0){spawn();spawnGap=220+Math.random()*220;}
        for(const o of obstacles){if(player.x<o.x+o.w&&player.x+player.w>o.x&&player.y>o.y-o.h)running=false;}}  
      (function loop(){update();draw();requestAnimationFrame(loop);})();  
      function jump(){if(player.y===ground)player.vy=JUMP;}
      cvs.addEventListener('pointerdown',jump);
      document.addEventListener('keydown',e=>{if(e.code==='Space'){e.preventDefault();jump();}if(e.code==='Enter'&&!running){reset();}});
      cvs.addEventListener('click',()=>{if(!running){reset();}});
    }
    initRunner();
  </script>
</body>
</html>
